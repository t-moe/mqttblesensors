<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MQTT C Client Libraries Internals: MQTTClient.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pahologo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MQTT C Client Libraries Internals
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">MQTTClient.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Synchronous API implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &quot;MQTTClient.h&quot;</code><br />
<code>#include &quot;MQTTPersistence.h&quot;</code><br />
<code>#include &quot;utf-8.h&quot;</code><br />
<code>#include &quot;MQTTProtocol.h&quot;</code><br />
<code>#include &quot;MQTTProtocolOut.h&quot;</code><br />
<code>#include &quot;Thread.h&quot;</code><br />
<code>#include &quot;SocketBuffer.h&quot;</code><br />
<code>#include &quot;StackTrace.h&quot;</code><br />
<code>#include &quot;Heap.h&quot;</code><br />
<code>#include &quot;VersionInfo.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for MQTTClient.c:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c__incl.png" border="0" usemap="#MQTTClient_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqEntry.html">qEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMQTTClients.html">MQTTClients</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a369266c24eacffb87046522897a570d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_GNU_SOURCE</b>&#160;&#160;&#160;/* for pthread_mutexattr_settype */</td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8054f166c9eb81b4e7695bc7f1ec79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff8054f166c9eb81b4e7695bc7f1ec79"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>URI_TCP</b>&#160;&#160;&#160;&quot;tcp://&quot;</td></tr>
<tr class="separator:aff8054f166c9eb81b4e7695bc7f1ec79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa60e1ead64be77ad551e745cbfd4d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9aa60e1ead64be77ad551e745cbfd4d3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>WINAPI</b></td></tr>
<tr class="separator:a9aa60e1ead64be77ad551e745cbfd4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7218845c1bc4a4eab72fc0cc7395d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a7218845c1bc4a4eab72fc0cc7395d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>START_TIME_TYPE</b>&#160;&#160;&#160;struct timeval</td></tr>
<tr class="separator:a0a7218845c1bc4a4eab72fc0cc7395d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48e5d65228327c5f6ad9503b0a72db32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48e5d65228327c5f6ad9503b0a72db32"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_INFO_STRINGS</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a48e5d65228327c5f6ad9503b0a72db32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5aeeab4387f9b4f936d6602f1a57211a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5aeeab4387f9b4f936d6602f1a57211a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_init</b> ()</td></tr>
<tr class="separator:a5aeeab4387f9b4f936d6602f1a57211a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182c7e9711687ceb7a3cb77bdc9790a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a182c7e9711687ceb7a3cb77bdc9790a7"></a>
<a class="el" href="structMQTTPacket.html">MQTTPacket</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_waitfor</b> (MQTTClient handle, int packet_type, int *rc, long timeout)</td></tr>
<tr class="separator:a182c7e9711687ceb7a3cb77bdc9790a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee72fde5c554737e6432cf4365298be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ee72fde5c554737e6432cf4365298be"></a>
<a class="el" href="structMQTTPacket.html">MQTTPacket</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_cycle</b> (int *sock, unsigned long timeout, int *rc)</td></tr>
<tr class="separator:a8ee72fde5c554737e6432cf4365298be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59948d0f2cc9befe1cad32e341b07e20"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59948d0f2cc9befe1cad32e341b07e20"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_cleanSession</b> (<a class="el" href="structClients.html">Clients</a> *client)</td></tr>
<tr class="separator:a59948d0f2cc9befe1cad32e341b07e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af053ae5aeb91f965e26689650b67ae3e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af053ae5aeb91f965e26689650b67ae3e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_stop</b> ()</td></tr>
<tr class="separator:af053ae5aeb91f965e26689650b67ae3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a557f4794895060f1279f9df64a36cef9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a557f4794895060f1279f9df64a36cef9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9">MQTTClient_disconnect_internal</a> (MQTTClient handle, int timeout)</td></tr>
<tr class="memdesc:a557f4794895060f1279f9df64a36cef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">mqttclient_mutex must be locked when you call this function, if multi threaded <br /></td></tr>
<tr class="separator:a557f4794895060f1279f9df64a36cef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce7b4ac49581bb8b17e3f1a31bc7fc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ce7b4ac49581bb8b17e3f1a31bc7fc6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6">MQTTClient_disconnect1</a> (MQTTClient handle, int timeout, int call_connection_lost, int stop)</td></tr>
<tr class="memdesc:a2ce7b4ac49581bb8b17e3f1a31bc7fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">mqttclient_mutex must be locked when you call this function, if multi threaded <br /></td></tr>
<tr class="separator:a2ce7b4ac49581bb8b17e3f1a31bc7fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d1389bd5997d65d07f0fb27a859b0d7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1d1389bd5997d65d07f0fb27a859b0d7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_writeComplete</b> (int socket)</td></tr>
<tr class="separator:a1d1389bd5997d65d07f0fb27a859b0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744d25e5d68e95695414cd70000a74fe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a744d25e5d68e95695414cd70000a74fe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_sleep</b> (long milliseconds)</td></tr>
<tr class="separator:a744d25e5d68e95695414cd70000a74fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb58cfa23f70921b2bcaaaaa2f6a1fc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bb58cfa23f70921b2bcaaaaa2f6a1fc"></a>
START_TIME_TYPE&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_start_clock</b> (void)</td></tr>
<tr class="separator:a2bb58cfa23f70921b2bcaaaaa2f6a1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f14c4bc522e956192a42d414c638e0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4f14c4bc522e956192a42d414c638e0"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_elapsed</b> (struct timeval start)</td></tr>
<tr class="separator:af4f14c4bc522e956192a42d414c638e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a0518d9ca924d12c1329dbe3de5f2b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6">MQTTClient_create</a> (MQTTClient *handle, const char *serverURI, const char *clientId, int persistence_type, void *persistence_context)</td></tr>
<tr class="memdesc:a9a0518d9ca924d12c1329dbe3de5f2b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates an MQTT client ready for connection to the specified server and using the specified persistent storage (see <a class="el" href="structMQTTClient__persistence.html" title="A structure containing the function pointers to a persistence implementation and the context or state...">MQTTClient_persistence</a>).  <a href="#a9a0518d9ca924d12c1329dbe3de5f2b6">More...</a><br /></td></tr>
<tr class="separator:a9a0518d9ca924d12c1329dbe3de5f2b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9960ec3261a03d5107cda5396679542e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9960ec3261a03d5107cda5396679542e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_terminate</b> (void)</td></tr>
<tr class="separator:a9960ec3261a03d5107cda5396679542e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5123340a98ae2acf79430f2094648f3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5123340a98ae2acf79430f2094648f3f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_emptyMessageQueue</b> (<a class="el" href="structClients.html">Clients</a> *client)</td></tr>
<tr class="separator:a5123340a98ae2acf79430f2094648f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae700c3f5cfea3813264ce95e7c8cf498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#ae700c3f5cfea3813264ce95e7c8cf498">MQTTClient_destroy</a> (MQTTClient *handle)</td></tr>
<tr class="memdesc:ae700c3f5cfea3813264ce95e7c8cf498"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function frees the memory allocated to an MQTT client (see <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>).  <a href="#ae700c3f5cfea3813264ce95e7c8cf498">More...</a><br /></td></tr>
<tr class="separator:ae700c3f5cfea3813264ce95e7c8cf498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc00ce11e0cac5dbc0938c512b4ab31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a2bc00ce11e0cac5dbc0938c512b4ab31">MQTTClient_freeMessage</a> (<a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> **message)</td></tr>
<tr class="memdesc:a2bc00ce11e0cac5dbc0938c512b4ab31"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function frees memory allocated to an MQTT message, including the additional memory allocated to the message payload.  <a href="#a2bc00ce11e0cac5dbc0938c512b4ab31">More...</a><br /></td></tr>
<tr class="separator:a2bc00ce11e0cac5dbc0938c512b4ab31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab217acbfaf47603355ca430983f93095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#ab217acbfaf47603355ca430983f93095">MQTTClient_free</a> (void *memory)</td></tr>
<tr class="memdesc:ab217acbfaf47603355ca430983f93095"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function frees memory allocated by the MQTT C client library, especially the topic name.  <a href="#ab217acbfaf47603355ca430983f93095">More...</a><br /></td></tr>
<tr class="separator:ab217acbfaf47603355ca430983f93095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dcc3faa7a0b50977638b8e052f33305"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7dcc3faa7a0b50977638b8e052f33305"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_deliverMessage</b> (int rc, <a class="el" href="structMQTTClients.html">MQTTClients</a> *m, char **topicName, int *topicLen, <a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> **message)</td></tr>
<tr class="separator:a7dcc3faa7a0b50977638b8e052f33305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af705886a44c359b7763e1e907ced9bfd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd">clientSockCompare</a> (void *a, void *b)</td></tr>
<tr class="memdesc:af705886a44c359b7763e1e907ced9bfd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structList.html" title="Structure to hold all data for one list. ">List</a> callback function for comparing clients by socket.  <a href="#af705886a44c359b7763e1e907ced9bfd">More...</a><br /></td></tr>
<tr class="separator:af705886a44c359b7763e1e907ced9bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43961cb53e692999e3f4cf1fe3dfd4e2"><td class="memItemLeft" align="right" valign="top">thread_return_type WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2">connectionLost_call</a> (void *context)</td></tr>
<tr class="memdesc:a43961cb53e692999e3f4cf1fe3dfd4e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper function to call connection lost on a separate thread.  <a href="#a43961cb53e692999e3f4cf1fe3dfd4e2">More...</a><br /></td></tr>
<tr class="separator:a43961cb53e692999e3f4cf1fe3dfd4e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228074ce657d43976d344ca6cb654ceb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a228074ce657d43976d344ca6cb654ceb"></a>
thread_return_type WINAPI&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_run</b> (void *n)</td></tr>
<tr class="separator:a228074ce657d43976d344ca6cb654ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad27d07782991a4937ebf2f39a021f83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#aad27d07782991a4937ebf2f39a021f83">MQTTClient_setCallbacks</a> (MQTTClient handle, void *context, MQTTClient_connectionLost *cl, MQTTClient_messageArrived *ma, MQTTClient_deliveryComplete *dc)</td></tr>
<tr class="memdesc:aad27d07782991a4937ebf2f39a021f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the callback functions for a specific client.  <a href="#aad27d07782991a4937ebf2f39a021f83">More...</a><br /></td></tr>
<tr class="separator:aad27d07782991a4937ebf2f39a021f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4b69f3fe4f6224d466c5b2e36b6036"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa4b69f3fe4f6224d466c5b2e36b6036"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_closeSession</b> (<a class="el" href="structClients.html">Clients</a> *client)</td></tr>
<tr class="separator:afa4b69f3fe4f6224d466c5b2e36b6036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d00dff0a0ba071896a8250e320dbdbb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d00dff0a0ba071896a8250e320dbdbb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Protocol_processPublication</b> (<a class="el" href="structPublish.html">Publish</a> *publish, <a class="el" href="structClients.html">Clients</a> *client)</td></tr>
<tr class="separator:a6d00dff0a0ba071896a8250e320dbdbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca39fd42557859a0ed090b2f5af9407"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaca39fd42557859a0ed090b2f5af9407"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_connectURIVersion</b> (MQTTClient handle, <a class="el" href="structMQTTClient__connectOptions.html">MQTTClient_connectOptions</a> *options, const char *serverURI, int MQTTVersion, START_TIME_TYPE start, long millisecsTimeout)</td></tr>
<tr class="separator:aaca39fd42557859a0ed090b2f5af9407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc1fe9e62aa43220458ae1771e3e996e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc1fe9e62aa43220458ae1771e3e996e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_connectURI</b> (MQTTClient handle, <a class="el" href="structMQTTClient__connectOptions.html">MQTTClient_connectOptions</a> *options, const char *serverURI)</td></tr>
<tr class="separator:abc1fe9e62aa43220458ae1771e3e996e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8ae61cd65c9dc0846df10122d7bd4e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#aaa8ae61cd65c9dc0846df10122d7bd4e">MQTTClient_connect</a> (MQTTClient handle, <a class="el" href="structMQTTClient__connectOptions.html">MQTTClient_connectOptions</a> *options)</td></tr>
<tr class="memdesc:aaa8ae61cd65c9dc0846df10122d7bd4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to connect a previously-created client (see <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>) to an MQTT server using the specified options.  <a href="#aaa8ae61cd65c9dc0846df10122d7bd4e">More...</a><br /></td></tr>
<tr class="separator:aaa8ae61cd65c9dc0846df10122d7bd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7b0789ff9ca9ded72dbad2e747b333"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f7b0789ff9ca9ded72dbad2e747b333"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a9f7b0789ff9ca9ded72dbad2e747b333">MQTTProtocol_closeSession</a> (<a class="el" href="structClients.html">Clients</a> *c, int sendwill)</td></tr>
<tr class="memdesc:a9f7b0789ff9ca9ded72dbad2e747b333"><td class="mdescLeft">&#160;</td><td class="mdescRight">mqttclient_mutex must be locked when you call this function, if multi threaded <br /></td></tr>
<tr class="separator:a9f7b0789ff9ca9ded72dbad2e747b333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e4d90c13a3c0705bc4a13bfe64e6525"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a1e4d90c13a3c0705bc4a13bfe64e6525">MQTTClient_disconnect</a> (MQTTClient handle, int timeout)</td></tr>
<tr class="memdesc:a1e4d90c13a3c0705bc4a13bfe64e6525"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to disconnect the client from the MQTT server.  <a href="#a1e4d90c13a3c0705bc4a13bfe64e6525">More...</a><br /></td></tr>
<tr class="separator:a1e4d90c13a3c0705bc4a13bfe64e6525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8231e8c47f6f67f7ebbb5dcb4c69c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a6e8231e8c47f6f67f7ebbb5dcb4c69c0">MQTTClient_isConnected</a> (MQTTClient handle)</td></tr>
<tr class="memdesc:a6e8231e8c47f6f67f7ebbb5dcb4c69c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows the client application to test whether or not a client is currently connected to the MQTT server.  <a href="#a6e8231e8c47f6f67f7ebbb5dcb4c69c0">More...</a><br /></td></tr>
<tr class="separator:a6e8231e8c47f6f67f7ebbb5dcb4c69c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92fa1c13f3db8399e042fbdbdfb692b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a92fa1c13f3db8399e042fbdbdfb692b3">MQTTClient_subscribeMany</a> (MQTTClient handle, int count, char *const *topic, int *qos)</td></tr>
<tr class="memdesc:a92fa1c13f3db8399e042fbdbdfb692b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to subscribe a client to a list of topics, which may contain wildcards (see wildcard).  <a href="#a92fa1c13f3db8399e042fbdbdfb692b3">More...</a><br /></td></tr>
<tr class="separator:a92fa1c13f3db8399e042fbdbdfb692b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1c28258f0d5c6a44ff53a98618f5f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a9c1c28258f0d5c6a44ff53a98618f5f3">MQTTClient_subscribe</a> (MQTTClient handle, const char *topic, int qos)</td></tr>
<tr class="memdesc:a9c1c28258f0d5c6a44ff53a98618f5f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to subscribe a client to a single topic, which may contain wildcards (see wildcard).  <a href="#a9c1c28258f0d5c6a44ff53a98618f5f3">More...</a><br /></td></tr>
<tr class="separator:a9c1c28258f0d5c6a44ff53a98618f5f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50abbce720d50b9f84b97ff9fa1f546d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a50abbce720d50b9f84b97ff9fa1f546d">MQTTClient_unsubscribeMany</a> (MQTTClient handle, int count, char *const *topic)</td></tr>
<tr class="memdesc:a50abbce720d50b9f84b97ff9fa1f546d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to remove existing subscriptions to a list of topics made by the specified client.  <a href="#a50abbce720d50b9f84b97ff9fa1f546d">More...</a><br /></td></tr>
<tr class="separator:a50abbce720d50b9f84b97ff9fa1f546d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8731be3dbc6a25f41f037f8bbbb054b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#aa8731be3dbc6a25f41f037f8bbbb054b">MQTTClient_unsubscribe</a> (MQTTClient handle, const char *topic)</td></tr>
<tr class="memdesc:aa8731be3dbc6a25f41f037f8bbbb054b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to remove an existing subscription made by the specified client.  <a href="#aa8731be3dbc6a25f41f037f8bbbb054b">More...</a><br /></td></tr>
<tr class="separator:aa8731be3dbc6a25f41f037f8bbbb054b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2dede68d660c4b6e27821669f952a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#aff2dede68d660c4b6e27821669f952a0">MQTTClient_publish</a> (MQTTClient handle, const char *topicName, int payloadlen, void *payload, int qos, int retained, MQTTClient_deliveryToken *deliveryToken)</td></tr>
<tr class="memdesc:aff2dede68d660c4b6e27821669f952a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to publish a message to a given topic (see also <a class="el" href="MQTTClient_8c.html#a5e0cfa14237d7557bee2a59747ecadd3" title="This function attempts to publish a message to a given topic (see also MQTTClient_publish()). ">MQTTClient_publishMessage()</a>).  <a href="#aff2dede68d660c4b6e27821669f952a0">More...</a><br /></td></tr>
<tr class="separator:aff2dede68d660c4b6e27821669f952a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e0cfa14237d7557bee2a59747ecadd3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a5e0cfa14237d7557bee2a59747ecadd3">MQTTClient_publishMessage</a> (MQTTClient handle, const char *topicName, <a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> *message, MQTTClient_deliveryToken *deliveryToken)</td></tr>
<tr class="memdesc:a5e0cfa14237d7557bee2a59747ecadd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function attempts to publish a message to a given topic (see also <a class="el" href="MQTTClient_8c.html#aff2dede68d660c4b6e27821669f952a0" title="This function attempts to publish a message to a given topic (see also MQTTClient_publishMessage()). ">MQTTClient_publish()</a>).  <a href="#a5e0cfa14237d7557bee2a59747ecadd3">More...</a><br /></td></tr>
<tr class="separator:a5e0cfa14237d7557bee2a59747ecadd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d0e18c3c551d5f37ad35d1f8798dfe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30d0e18c3c551d5f37ad35d1f8798dfe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MQTTClient_retry</b> (void)</td></tr>
<tr class="separator:a30d0e18c3c551d5f37ad35d1f8798dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2df88d00a3dadd510a8cb774739366"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a4c2df88d00a3dadd510a8cb774739366">MQTTClient_receive</a> (MQTTClient handle, char **topicName, int *topicLen, <a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> **message, unsigned long timeout)</td></tr>
<tr class="memdesc:a4c2df88d00a3dadd510a8cb774739366"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs a synchronous receive of incoming messages.  <a href="#a4c2df88d00a3dadd510a8cb774739366">More...</a><br /></td></tr>
<tr class="separator:a4c2df88d00a3dadd510a8cb774739366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad3d29864a9ca08202b0832e0f6678e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e">MQTTClient_yield</a> (void)</td></tr>
<tr class="memdesc:a8ad3d29864a9ca08202b0832e0f6678e"><td class="mdescLeft">&#160;</td><td class="mdescRight">When implementing a single-threaded client, call this function periodically to allow processing of message retries and to send MQTT keepalive pings.  <a href="#a8ad3d29864a9ca08202b0832e0f6678e">More...</a><br /></td></tr>
<tr class="separator:a8ad3d29864a9ca08202b0832e0f6678e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99954925a0ed015423873a93d68fec6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad99954925a0ed015423873a93d68fec6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pubCompare</b> (void *a, void *b)</td></tr>
<tr class="separator:ad99954925a0ed015423873a93d68fec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8786efdd6c3a50c6ca33cfb5d8fc283"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#ab8786efdd6c3a50c6ca33cfb5d8fc283">MQTTClient_waitForCompletion</a> (MQTTClient handle, MQTTClient_deliveryToken mdt, unsigned long timeout)</td></tr>
<tr class="memdesc:ab8786efdd6c3a50c6ca33cfb5d8fc283"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the client application to synchronize execution of the main thread with completed publication of a message.  <a href="#ab8786efdd6c3a50c6ca33cfb5d8fc283">More...</a><br /></td></tr>
<tr class="separator:ab8786efdd6c3a50c6ca33cfb5d8fc283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a617c6b0492c04a4ddea592f5e53604"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a2a617c6b0492c04a4ddea592f5e53604">MQTTClient_getPendingDeliveryTokens</a> (MQTTClient handle, MQTTClient_deliveryToken **tokens)</td></tr>
<tr class="memdesc:a2a617c6b0492c04a4ddea592f5e53604"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets a pointer to an array of delivery tokens for messages that are currently in-flight (pending completion).  <a href="#a2a617c6b0492c04a4ddea592f5e53604">More...</a><br /></td></tr>
<tr class="separator:a2a617c6b0492c04a4ddea592f5e53604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc104606d1cbae7e66de21191cd71837"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMQTTClient__nameValue.html">MQTTClient_nameValue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#adc104606d1cbae7e66de21191cd71837">MQTTClient_getVersionInfo</a> ()</td></tr>
<tr class="memdesc:adc104606d1cbae7e66de21191cd71837"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns version information about the library.  <a href="#adc104606d1cbae7e66de21191cd71837">More...</a><br /></td></tr>
<tr class="separator:adc104606d1cbae7e66de21191cd71837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a634889b3a4a1f4a8ab5bf268ceb63691"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MQTTClient_8c.html#a634889b3a4a1f4a8ab5bf268ceb63691">MQTTProtocol_checkPendingWrites</a> ()</td></tr>
<tr class="memdesc:a634889b3a4a1f4a8ab5bf268ceb63691"><td class="mdescLeft">&#160;</td><td class="mdescRight">See if any pending writes have been completed, and cleanup if so.  <a href="#a634889b3a4a1f4a8ab5bf268ceb63691">More...</a><br /></td></tr>
<tr class="separator:a634889b3a4a1f4a8ab5bf268ceb63691"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4e48f781af5661344a940eadb27e2770"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e48f781af5661344a940eadb27e2770"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>client_timestamp_eye</b> = &quot;MQTTClientV3_Timestamp &quot; BUILD_TIMESTAMP</td></tr>
<tr class="separator:a4e48f781af5661344a940eadb27e2770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89cf6474aa8d30bc4ad3cd5af3a35211"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89cf6474aa8d30bc4ad3cd5af3a35211"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>client_version_eye</b> = &quot;MQTTClientV3_Version &quot; CLIENT_VERSION</td></tr>
<tr class="separator:a89cf6474aa8d30bc4ad3cd5af3a35211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de1b785bccb15bfa46dcf3a6706aad0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structClientStates.html">ClientStates</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ClientState</b></td></tr>
<tr class="separator:a7de1b785bccb15bfa46dcf3a6706aad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f44b42678b96ba591f6042671e3ba6b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2f44b42678b96ba591f6042671e3ba6b"></a>
<a class="el" href="structClientStates.html">ClientStates</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>bstate</b> = &amp;ClientState</td></tr>
<tr class="separator:a2f44b42678b96ba591f6042671e3ba6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc95966878cf339e99ab7f7d1f7cc82"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2dc95966878cf339e99ab7f7d1f7cc82"></a>
<a class="el" href="structMQTTProtocol.html">MQTTProtocol</a>&#160;</td><td class="memItemRight" valign="bottom"><b>state</b></td></tr>
<tr class="separator:a2dc95966878cf339e99ab7f7d1f7cc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238cb4b93c0ffe869accf47116a3e022"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a238cb4b93c0ffe869accf47116a3e022"></a>
static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>mqttclient_mutex_store</b> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:a238cb4b93c0ffe869accf47116a3e022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d74bdafe1f165a7c7b3f204212b1dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34d74bdafe1f165a7c7b3f204212b1dd"></a>
static mutex_type&#160;</td><td class="memItemRight" valign="bottom"><b>mqttclient_mutex</b> = &amp;mqttclient_mutex_store</td></tr>
<tr class="separator:a34d74bdafe1f165a7c7b3f204212b1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ea93ecc4a4eef4286f0dfd4be5aafb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53ea93ecc4a4eef4286f0dfd4be5aafb"></a>
static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>socket_mutex_store</b> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:a53ea93ecc4a4eef4286f0dfd4be5aafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e21c80906915bcadf7b0937235a3416"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e21c80906915bcadf7b0937235a3416"></a>
static mutex_type&#160;</td><td class="memItemRight" valign="bottom"><b>socket_mutex</b> = &amp;socket_mutex_store</td></tr>
<tr class="separator:a2e21c80906915bcadf7b0937235a3416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d35b6edc70eb0a0878527187188a5d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a39d35b6edc70eb0a0878527187188a5d"></a>
static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>subscribe_mutex_store</b> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:a39d35b6edc70eb0a0878527187188a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d1d41fc77b4fd3b35d92998e3caf88"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57d1d41fc77b4fd3b35d92998e3caf88"></a>
static mutex_type&#160;</td><td class="memItemRight" valign="bottom"><b>subscribe_mutex</b> = &amp;subscribe_mutex_store</td></tr>
<tr class="separator:a57d1d41fc77b4fd3b35d92998e3caf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d26b53a93f99eeca00177df5ba519b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6d26b53a93f99eeca00177df5ba519b"></a>
static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>unsubscribe_mutex_store</b> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:ae6d26b53a93f99eeca00177df5ba519b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6c836b583d21bb5d1950e4654070a5d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa6c836b583d21bb5d1950e4654070a5d"></a>
static mutex_type&#160;</td><td class="memItemRight" valign="bottom"><b>unsubscribe_mutex</b> = &amp;unsubscribe_mutex_store</td></tr>
<tr class="separator:aa6c836b583d21bb5d1950e4654070a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d2f8260515229acdcc8c6c378bd6f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04d2f8260515229acdcc8c6c378bd6f1"></a>
static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>connect_mutex_store</b> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:a04d2f8260515229acdcc8c6c378bd6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecac74d6e790ccf5af3918553b040bde"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecac74d6e790ccf5af3918553b040bde"></a>
static mutex_type&#160;</td><td class="memItemRight" valign="bottom"><b>connect_mutex</b> = &amp;connect_mutex_store</td></tr>
<tr class="separator:aecac74d6e790ccf5af3918553b040bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e6787d0fdef47257da047922f0f28b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a50e6787d0fdef47257da047922f0f28b"></a>
static volatile int&#160;</td><td class="memItemRight" valign="bottom"><b>initialized</b> = 0</td></tr>
<tr class="separator:a50e6787d0fdef47257da047922f0f28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96317981ac7f003130a55ffda157c4c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96317981ac7f003130a55ffda157c4c1"></a>
static <a class="el" href="structList.html">List</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>handles</b> = NULL</td></tr>
<tr class="separator:a96317981ac7f003130a55ffda157c4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8672640f42e8308c593fafe968241f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8672640f42e8308c593fafe968241f5"></a>
static time_t&#160;</td><td class="memItemRight" valign="bottom"><b>last</b></td></tr>
<tr class="separator:ad8672640f42e8308c593fafe968241f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f45113638a0b749a8a205d2cd7fb42b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2f45113638a0b749a8a205d2cd7fb42b"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>running</b> = 0</td></tr>
<tr class="separator:a2f45113638a0b749a8a205d2cd7fb42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347200bb2e843926f1be8fb43de273b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a347200bb2e843926f1be8fb43de273b3"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>tostop</b> = 0</td></tr>
<tr class="separator:a347200bb2e843926f1be8fb43de273b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5badf3940b33aca748205668c626668"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa5badf3940b33aca748205668c626668"></a>
static thread_id_type&#160;</td><td class="memItemRight" valign="bottom"><b>run_id</b> = 0</td></tr>
<tr class="separator:aa5badf3940b33aca748205668c626668"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Synchronous API implementation. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af705886a44c359b7763e1e907ced9bfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int clientSockCompare </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structList.html" title="Structure to hold all data for one list. ">List</a> callback function for comparing clients by socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>first integer value </td></tr>
    <tr><td class="paramname">b</td><td>second integer value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean indicating whether a and b are equal </dd></dl>

</div>
</div>
<a class="anchor" id="a43961cb53e692999e3f4cf1fe3dfd4e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">thread_return_type WINAPI connectionLost_call </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper function to call connection lost on a separate thread. </p>
<p>A separate thread is needed to allow the connectionLost function to make API calls (e.g. connect) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>a pointer to the relevant client </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>thread_return_type standard thread return value - not used here </dd></dl>

</div>
</div>
<a class="anchor" id="aaa8ae61cd65c9dc0846df10122d7bd4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_connect </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMQTTClient__connectOptions.html">MQTTClient_connectOptions</a> *&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to connect a previously-created client (see <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>) to an MQTT server using the specified options. </p>
<p>If you want to enable asynchronous message and status notifications, you must call <a class="el" href="MQTTClient_8c.html#aad27d07782991a4937ebf2f39a021f83" title="This function sets the callback functions for a specific client. ">MQTTClient_setCallbacks()</a> prior to <a class="el" href="MQTTClient_8c.html#aaa8ae61cd65c9dc0846df10122d7bd4e" title="This function attempts to connect a previously-created client (see MQTTClient_create()) to an MQTT se...">MQTTClient_connect()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">options</td><td>A pointer to a valid <a class="el" href="structMQTTClient__connectOptions.html" title="MQTTClient_connectOptions defines several settings that control the way the client connects to an MQT...">MQTTClient_connectOptions</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the client successfully connects to the server. An error code is returned if the client was unable to connect to the server. Error codes greater than 0 are returned by the MQTT protocol:<br />
<br />
 <b>1</b>: Connection refused: Unacceptable protocol version<br />
 <b>2</b>: Connection refused: Identifier rejected<br />
 <b>3</b>: Connection refused: Server unavailable<br />
 <b>4</b>: Connection refused: Bad user name or password<br />
 <b>5</b>: Connection refused: Not authorized<br />
 <b>6-255</b>: Reserved for future use<br />
 </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_aaa8ae61cd65c9dc0846df10122d7bd4e_cgraph.png" border="0" usemap="#MQTTClient_8c_aaa8ae61cd65c9dc0846df10122d7bd4e_cgraph" alt=""/></div>
<map name="MQTTClient_8c_aaa8ae61cd65c9dc0846df10122d7bd4e_cgraph" id="MQTTClient_8c_aaa8ae61cd65c9dc0846df10122d7bd4e_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="212,5,359,32"/><area shape="rect" id="node3" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="211,56,360,83"/><area shape="rect" id="node6" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="204,107,367,133"/><area shape="rect" id="node4" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="415,56,525,83"/><area shape="rect" id="node5" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="573,56,720,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9a0518d9ca924d12c1329dbe3de5f2b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_create </td>
          <td>(</td>
          <td class="paramtype">MQTTClient *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>serverURI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>clientId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>persistence_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>persistence_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates an MQTT client ready for connection to the specified server and using the specified persistent storage (see <a class="el" href="structMQTTClient__persistence.html" title="A structure containing the function pointers to a persistence implementation and the context or state...">MQTTClient_persistence</a>). </p>
<p>See also <a class="el" href="MQTTClient_8c.html#ae700c3f5cfea3813264ce95e7c8cf498" title="This function frees the memory allocated to an MQTT client (see MQTTClient_create()). ">MQTTClient_destroy()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A pointer to an ::MQTTClient handle. The handle is populated with a valid client reference following a successful return from this function. </td></tr>
    <tr><td class="paramname">serverURI</td><td>A null-terminated string specifying the server to which the client will connect. It takes the form <em>protocol://host:port</em>. Currently, <em>protocol</em> must be <em>tcp</em> or <em>ssl</em>. For <em>host</em>, you can specify either an IP address or a host name. For instance, to connect to a server running on the local machines with the default MQTT port, specify <em>tcp://localhost:1883</em>. </td></tr>
    <tr><td class="paramname">clientId</td><td>The client identifier passed to the server when the client connects to it. It is a null-terminated UTF-8 encoded string. ClientIDs must be no longer than 23 characters according to the MQTT specification. </td></tr>
    <tr><td class="paramname">persistence_type</td><td>The type of persistence to be used by the client: <br />
 <a class="el" href="MQTTClientPersistence_8h.html#ae01e089313a65ac4661ed216b6ac00fa" title="This persistence_type value specifies a memory-based persistence mechanism (see MQTTClient_create())...">MQTTCLIENT_PERSISTENCE_NONE</a>: Use in-memory persistence. If the device or system on which the client is running fails or is switched off, the current state of any in-flight messages is lost and some messages may not be delivered even at QoS1 and QoS2. <br />
 <a class="el" href="MQTTClientPersistence_8h.html#aaa948291718a9c06369b854b0f64bc32" title="This persistence_type value specifies the default file system-based persistence mechanism (see MQTTCl...">MQTTCLIENT_PERSISTENCE_DEFAULT</a>: Use the default (file system-based) persistence mechanism. Status about in-flight messages is held in persistent storage and provides some protection against message loss in the case of unexpected failure. <br />
 <a class="el" href="MQTTClientPersistence_8h.html#a5dc68b8616e4041e037bad94ce07681b" title="This persistence_type value specifies an application-specific persistence mechanism (see MQTTClient_c...">MQTTCLIENT_PERSISTENCE_USER</a>: Use an application-specific persistence implementation. Using this type of persistence gives control of the persistence mechanism to the application. The application has to implement the <a class="el" href="structMQTTClient__persistence.html" title="A structure containing the function pointers to a persistence implementation and the context or state...">MQTTClient_persistence</a> interface. </td></tr>
    <tr><td class="paramname">persistence_context</td><td>If the application uses <a class="el" href="MQTTClientPersistence_8h.html#ae01e089313a65ac4661ed216b6ac00fa" title="This persistence_type value specifies a memory-based persistence mechanism (see MQTTClient_create())...">MQTTCLIENT_PERSISTENCE_NONE</a> persistence, this argument is unused and should be set to NULL. For <a class="el" href="MQTTClientPersistence_8h.html#aaa948291718a9c06369b854b0f64bc32" title="This persistence_type value specifies the default file system-based persistence mechanism (see MQTTCl...">MQTTCLIENT_PERSISTENCE_DEFAULT</a> persistence, it should be set to the location of the persistence directory (if set to NULL, the persistence directory used is the working directory). Applications that use <a class="el" href="MQTTClientPersistence_8h.html#a5dc68b8616e4041e037bad94ce07681b" title="This persistence_type value specifies an application-specific persistence mechanism (see MQTTClient_c...">MQTTCLIENT_PERSISTENCE_USER</a> persistence set this argument to point to a valid <a class="el" href="structMQTTClient__persistence.html" title="A structure containing the function pointers to a persistence implementation and the context or state...">MQTTClient_persistence</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the client is successfully created, otherwise an error code is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a9a0518d9ca924d12c1329dbe3de5f2b6_cgraph.png" border="0" usemap="#MQTTClient_8c_a9a0518d9ca924d12c1329dbe3de5f2b6_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a9a0518d9ca924d12c1329dbe3de5f2b6_cgraph" id="MQTTClient_8c_a9a0518d9ca924d12c1329dbe3de5f2b6_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="1463,53,1609,79"/><area shape="rect" id="node3" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="239,523,389,550"/><area shape="rect" id="node6" href="Heap_8c.html#aaee40ee4f12cd0344ee98051b43ac90a" title="Heap initialization. " alt="" coords="257,574,371,601"/><area shape="rect" id="node8" href="MQTTClient_8c.html#adc104606d1cbae7e66de21191cd71837" title="This function returns version information about the library. " alt="" coords="219,625,409,651"/><area shape="rect" id="node9" href="LinkedList_8c.html#a27e2cccab9752618ead91eafbe2a9a46" title="Allocates and initializes a new list structure. " alt="" coords="781,675,875,702"/><area shape="rect" id="node11" href="Socket_8c.html#aba77008a256bce4d74f199564c404a1b" title="Initialize the socket module. " alt="" coords="241,675,387,702"/><area shape="rect" id="node14" href="MQTTProtocolClient_8c.html#a89588f085edc5cee4eb650e8ad114df4" title="Duplicate a string, safely, allocating space on the heap. " alt="" coords="264,177,364,203"/><area shape="rect" id="node18" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="1455,205,1617,231"/><area shape="rect" id="node19" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="781,153,875,179"/><area shape="rect" id="node21" href="Thread_8c.html#a8923b5b311739a1de8efe7d5515a3db4" title="Create a new semaphore. " alt="" coords="239,777,389,803"/><area shape="rect" id="node22" href="MQTTPersistence_8c.html#a75e756280e499db530896c5b74b8d3b5" title="Creates a MQTTClient_persistence structure representing a persistence implementation. " alt="" coords="225,929,403,955"/><area shape="rect" id="node32" href="MQTTPersistence_8c.html#a65b64467da967b6930966b98f249406e" title="Open persistent store and restore any persisted messages. " alt="" coords="219,390,409,417"/><area shape="rect" id="node43" href="MQTTPersistence_8c.html#ab4f6437946ac80d5f9e882e92e59cc5c" title="Restores a queue of messages from persistence to memory. " alt="" coords="193,99,435,140"/><area shape="rect" id="node4" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="519,523,630,550"/><area shape="rect" id="node5" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="755,523,901,550"/><area shape="rect" id="node7" href="Heap_8c.html#a608dedff6e86c7757dde566dc5664ae2" title="List callback function for comparing storage elements. " alt="" coords="525,574,624,601"/><area shape="rect" id="node10" href="LinkedList_8c.html#aa254fb1eab8e30d0e03859b333dc22ed" title="Sets a list structure to empty &#45; all null values. " alt="" coords="1061,625,1136,651"/><area shape="rect" id="node12" href="SocketBuffer_8c.html#abf6071ef7154a1c39316bf968d1752b1" title="Initialize the socketBuffer module. " alt="" coords="493,625,656,651"/><area shape="rect" id="node13" href="SocketBuffer_8c.html#a29a5ad8468a4fc6de64a01081239f120" title="Create a new default queue when one has just been used. " alt="" coords="744,625,912,651"/><area shape="rect" id="node15" href="MQTTProtocolClient_8c.html#a447b65c664ebedef8fecb70e29dc1767" title="Copy no more than dest_size &#45;1 characters from the string pointed to by src to the array pointed to b..." alt="" coords="521,159,628,186"/><area shape="rect" id="node16" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="805,102,851,129"/><area shape="rect" id="node17" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="1041,103,1156,130"/><area shape="rect" id="node20" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1256,285,1407,311"/><area shape="rect" id="node23" href="MQTTPersistenceDefault_8c.html#a919cf4710a1f7d7ce0878599e9aa4700" title="Create persistence directory for the client: context/clientID&#45;serverURI. " alt="" coords="537,827,612,854"/><area shape="rect" id="node25" href="MQTTPersistenceDefault_8c.html#a24f38d19ff3db61292d7b463e59174ef" title="Delete client persistence directory (if empty). " alt="" coords="537,878,612,905"/><area shape="rect" id="node26" href="MQTTPersistenceDefault_8c.html#a64e0c1a2fd06375b975d6643175572d8" title="Write wire message to the client persistence directory. " alt="" coords="543,929,606,955"/><area shape="rect" id="node27" href="MQTTPersistenceDefault_8c.html#a64b106b9a2778f97d271af7c9a7940f2" title="Delete a persisted message from the client persistence directory. " alt="" coords="783,954,873,981"/><area shape="rect" id="node28" href="MQTTPersistenceDefault_8c.html#a3aef9f9af29882fac9e76984e4c2954c" title="Retrieve a wire message from the client persistence directory. " alt="" coords="543,1030,606,1057"/><area shape="rect" id="node29" href="MQTTPersistenceDefault_8c.html#a9f358375b8e254983d00f8b057e97dd6" title="Returns the keys (file names w/o the extension) in the client persistence directory. " alt="" coords="539,1081,610,1107"/><area shape="rect" id="node30" href="MQTTPersistenceDefault_8c.html#a15b1457f7fd20dde1fd51ed434321e1a" title="Delete all the persisted message in the client persistence directory. " alt="" coords="538,1131,611,1158"/><area shape="rect" id="node31" href="MQTTPersistenceDefault_8c.html#a2a55461def3359a2b0aff6b3bb0644ad" title="Returns whether if a wire message is persisted in the client persistence directory. " alt="" coords="515,777,634,803"/><area shape="rect" id="node24" href="MQTTPersistenceDefault_8c.html#aecfbfa761dfca1b551d9ade325f480b1" title="Function to create a directory. " alt="" coords="789,827,867,854"/><area shape="rect" id="node33" href="MQTTPersistence_8c.html#a45acad55c5c401dc42c9284a939129c9" title="Restores the persisted records to the outbound and inbound message queues of the client. " alt="" coords="483,310,667,337"/><area shape="rect" id="node34" href="MQTTPersistence_8c.html#a48bc10c80bf4802105fa11fe711b71b3" title="Returns a MQTT packet restored from persisted data. " alt="" coords="715,422,941,449"/><area shape="rect" id="node35" href="MQTTProtocolClient_8c.html#a1c8585308f7ec4347ac7dd73745034ee" title="Copy and store message data for retries. " alt="" coords="721,203,935,230"/><area shape="rect" id="node38" href="MQTTPacket_8c.html#a642e5f62d21f14e81f8fc70b491d89c8" title="Free allocated storage for a publish packet. " alt="" coords="740,254,916,281"/><area shape="rect" id="node39" href="MQTTPersistence_8c.html#a568adcd6ad3542d6f631a7f7a2e682e5" title="Inserts the specified message into the list, maintaining message ID order. " alt="" coords="735,305,921,347"/><area shape="rect" id="node42" href="MQTTPersistence_8c.html#adbf5881a3c6ce9bd7062182dfffe27fa" title="Checks whether the message IDs wrapped by looking for the largest gap between two consecutive message..." alt="" coords="725,371,931,398"/><area shape="rect" id="node36" href="MQTTProtocolClient_8c.html#ac753a3ad12292a0a9c2f4343bd33817e" title="Store message data for possible retry. " alt="" coords="989,205,1208,231"/><area shape="rect" id="node37" href="Heap_8c.html#a0f10ff94faca02a6f81953c889802954" title="Utility to find an item in the heap. " alt="" coords="1274,205,1389,231"/><area shape="rect" id="node40" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1035,367,1162,394"/><area shape="rect" id="node41" href="LinkedList_8c.html#acc40d65b6b0e783d9b088575be000baf" title="Insert an item to a list at a specific position. " alt="" coords="1059,311,1139,338"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae700c3f5cfea3813264ce95e7c8cf498"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQTTClient_destroy </td>
          <td>(</td>
          <td class="paramtype">MQTTClient *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function frees the memory allocated to an MQTT client (see <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>). </p>
<p>It should be called when the client is no longer required. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A pointer to the handle referring to the ::MQTTClient structure to be freed. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_ae700c3f5cfea3813264ce95e7c8cf498_cgraph.png" border="0" usemap="#MQTTClient_8c_ae700c3f5cfea3813264ce95e7c8cf498_cgraph" alt=""/></div>
<map name="MQTTClient_8c_ae700c3f5cfea3813264ce95e7c8cf498_cgraph" id="MQTTClient_8c_ae700c3f5cfea3813264ce95e7c8cf498_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="1021,62,1168,88"/><area shape="rect" id="node3" href="MQTTProtocolClient_8c.html#a89588f085edc5cee4eb650e8ad114df4" title="Duplicate a string, safely, allocating space on the heap. " alt="" coords="239,99,339,126"/><area shape="rect" id="node5" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="789,124,834,151"/><area shape="rect" id="node7" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="1013,188,1176,215"/><area shape="rect" id="node8" href="MQTTPersistence_8c.html#a385b6c191dbf51652d3e3a81813848f1" title="Close persistent store. " alt="" coords="203,251,374,278"/><area shape="rect" id="node11" href="MQTTProtocolClient_8c.html#a52e062f52e5a42275471eeb23040fc0e" title="Free a client structure. " alt="" coords="200,302,377,328"/><area shape="rect" id="node16" href="LinkedList_8c.html#a8430370b2b15c56ec95bb8e7e36753a5" title="Removes and frees an item in a list by comparing the pointer to the content. " alt="" coords="1260,302,1355,328"/><area shape="rect" id="node21" href="Thread_8c.html#ad075ec07f801ac1a2a7dee7097048182" title="Destroy a semaphore which has already been created. " alt="" coords="211,454,367,480"/><area shape="rect" id="node4" href="MQTTProtocolClient_8c.html#a447b65c664ebedef8fecb70e29dc1767" title="Copy no more than dest_size &#45;1 characters from the string pointed to by src to the array pointed to b..." alt="" coords="482,99,589,126"/><area shape="rect" id="node6" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="1037,124,1152,151"/><area shape="rect" id="node9" href="MQTTPersistenceDefault_8c.html#a919cf4710a1f7d7ce0878599e9aa4700" title="Create persistence directory for the client: context/clientID&#45;serverURI. " alt="" coords="498,251,573,278"/><area shape="rect" id="node10" href="MQTTPersistenceDefault_8c.html#aecfbfa761dfca1b551d9ade325f480b1" title="Function to create a directory. " alt="" coords="772,251,851,278"/><area shape="rect" id="node12" href="MQTTProtocolClient_8c.html#a8514ddc8d0f346c0da19ab4d59b4062f" title="Empty and free up all storage used by a message list. " alt="" coords="425,302,645,328"/><area shape="rect" id="node20" href="LinkedList_8c.html#a276950531b3f54e0dda27d597572c192" title="Removes and frees all items in a list, and frees the list itself. " alt="" coords="776,352,847,379"/><area shape="rect" id="node13" href="MQTTProtocolClient_8c.html#ab9c5a22f0cbd4fa648663de7ae7118ab" title="Empty a message list, leaving it able to accept new messages. " alt="" coords="693,302,929,328"/><area shape="rect" id="node14" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1680,276,1807,303"/><area shape="rect" id="node15" href="MQTTProtocolClient_8c.html#a900fa28a8774ad6f5535104bb62e7abf" title="Remove stored message data. " alt="" coords="977,302,1212,328"/><area shape="rect" id="node19" href="LinkedList_8c.html#a3cf8578dba23f97dd0411e85fe3b7ff2" title="Removes and frees all items in a list, leaving the list ready for new items. " alt="" coords="1052,352,1137,379"/><area shape="rect" id="node17" href="LinkedList_8c.html#a7c3ca6a923cf771a5e68b25047d3df42" title="Removes and optionally frees an element in a list by comparing the content. " alt="" coords="1403,302,1485,328"/><area shape="rect" id="node18" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1533,302,1632,328"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1e4d90c13a3c0705bc4a13bfe64e6525"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_disconnect </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to disconnect the client from the MQTT server. </p>
<p>In order to allow the client time to complete handling of messages that are in-flight when this function is called, a timeout period is specified. When the timeout period has expired, the client disconnects even if there are still outstanding message acknowledgements. The next time the client connects to the same server, any QoS 1 or 2 messages which have not completed will be retried depending on the cleansession settings for both the previous and the new connection (see <a class="el" href="structMQTTClient__connectOptions.html#a03a2cfaf17483f1b0aab2a70f3ef30d9" title="This is a boolean value. ">MQTTClient_connectOptions.cleansession</a> and <a class="el" href="MQTTClient_8c.html#aaa8ae61cd65c9dc0846df10122d7bd4e" title="This function attempts to connect a previously-created client (see MQTTClient_create()) to an MQTT se...">MQTTClient_connect()</a>). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">timeout</td><td>The client delays disconnection for up to this time (in milliseconds) in order to allow in-flight message transfers to complete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the client successfully disconnects from the server. An error code is returned if the client was unable to disconnect from the server </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a1e4d90c13a3c0705bc4a13bfe64e6525_cgraph.png" border="0" usemap="#MQTTClient_8c_a1e4d90c13a3c0705bc4a13bfe64e6525_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a1e4d90c13a3c0705bc4a13bfe64e6525_cgraph" id="MQTTClient_8c_a1e4d90c13a3c0705bc4a13bfe64e6525_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="651,188,797,215"/><area shape="rect" id="node3" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="221,188,397,215"/><area shape="rect" id="node4" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="643,391,805,417"/><area shape="rect" id="node5" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="455,289,583,316"/><area shape="rect" id="node10" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="446,36,591,63"/><area shape="rect" id="node11" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="452,87,585,113"/><area shape="rect" id="node12" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="496,340,541,367"/><area shape="rect" id="node14" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="467,137,570,164"/><area shape="rect" id="node15" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="445,239,592,265"/><area shape="rect" id="node6" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="675,289,773,316"/><area shape="rect" id="node8" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="651,239,797,265"/><area shape="rect" id="node9" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="640,50,808,91"/><area shape="rect" id="node7" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="856,289,983,316"/><area shape="rect" id="node13" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="667,340,781,367"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab217acbfaf47603355ca430983f93095"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQTTClient_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function frees memory allocated by the MQTT C client library, especially the topic name. </p>
<p>This is needed on Windows when the client libary and application program have been compiled with different versions of the C compiler. It is thus good policy to always use this function when freeing any MQTT C client- allocated memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>The pointer to the client library storage to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2bc00ce11e0cac5dbc0938c512b4ab31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQTTClient_freeMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> **&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function frees memory allocated to an MQTT message, including the additional memory allocated to the message payload. </p>
<p>The client application calls this function when the message has been fully processed. <b>Important note:</b> This function does not free the memory allocated to a message topic string. It is the responsibility of the client application to free this memory using the <a class="el" href="MQTTClient_8c.html#ab217acbfaf47603355ca430983f93095" title="This function frees memory allocated by the MQTT C client library, especially the topic name...">MQTTClient_free()</a> library function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The address of a pointer to the <a class="el" href="structMQTTClient__message.html" title="A structure representing the payload and attributes of an MQTT message. ">MQTTClient_message</a> structure to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2a617c6b0492c04a4ddea592f5e53604"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_getPendingDeliveryTokens </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_deliveryToken **&#160;</td>
          <td class="paramname"><em>tokens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets a pointer to an array of delivery tokens for messages that are currently in-flight (pending completion). </p>
<p><b>Important note:</b> The memory used to hold the array of tokens is malloc()'d in this function. The client application is responsible for freeing this memory when it is no longer required. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">tokens</td><td>The address of a pointer to an ::MQTTClient_deliveryToken. When the function returns successfully, the pointer is set to point to an array of tokens representing messages pending completion. The last member of the array is set to -1 to indicate there are no more tokens. If no tokens are pending, the pointer is set to NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the function returns successfully. An error code is returned if there was a problem obtaining the list of pending tokens. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a2a617c6b0492c04a4ddea592f5e53604_cgraph.png" border="0" usemap="#MQTTClient_8c_a2a617c6b0492c04a4ddea592f5e53604_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a2a617c6b0492c04a4ddea592f5e53604_cgraph" id="MQTTClient_8c_a2a617c6b0492c04a4ddea592f5e53604_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="284,5,431,32"/><area shape="rect" id="node3" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="294,56,421,83"/><area shape="rect" id="node4" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="276,107,439,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adc104606d1cbae7e66de21191cd71837"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMQTTClient__nameValue.html">MQTTClient_nameValue</a>* MQTTClient_getVersionInfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns version information about the library. </p>
<p>no trace information will be returned. </p><dl class="section return"><dt>Returns</dt><dd>an array of strings describing the library. The last entry is a NULL pointer. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e8231e8c47f6f67f7ebbb5dcb4c69c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_isConnected </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows the client application to test whether or not a client is currently connected to the MQTT server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean true if the client is connected, otherwise false. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a6e8231e8c47f6f67f7ebbb5dcb4c69c0_cgraph.png" border="0" usemap="#MQTTClient_8c_a6e8231e8c47f6f67f7ebbb5dcb4c69c0_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a6e8231e8c47f6f67f7ebbb5dcb4c69c0_cgraph" id="MQTTClient_8c_a6e8231e8c47f6f67f7ebbb5dcb4c69c0_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="240,5,387,32"/><area shape="rect" id="node3" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="232,56,395,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aff2dede68d660c4b6e27821669f952a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_publish </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payloadlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>retained</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_deliveryToken *&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to publish a message to a given topic (see also <a class="el" href="MQTTClient_8c.html#a5e0cfa14237d7557bee2a59747ecadd3" title="This function attempts to publish a message to a given topic (see also MQTTClient_publish()). ">MQTTClient_publishMessage()</a>). </p>
<p>An ::MQTTClient_deliveryToken is issued when this function returns successfully. If the client application needs to test for succesful delivery of QoS1 and QoS2 messages, this can be done either asynchronously or synchronously (see async, <a class="el" href="MQTTClient_8c.html#ab8786efdd6c3a50c6ca33cfb5d8fc283" title="This function is called by the client application to synchronize execution of the main thread with co...">MQTTClient_waitForCompletion</a> and MQTTClient_deliveryComplete()). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">topicName</td><td>The topic associated with this message. </td></tr>
    <tr><td class="paramname">payloadlen</td><td>The length of the payload in bytes. </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the byte array payload of the message. </td></tr>
    <tr><td class="paramname">qos</td><td>The qos of the message. </td></tr>
    <tr><td class="paramname">retained</td><td>The retained flag for the message. </td></tr>
    <tr><td class="paramname">dt</td><td>A pointer to an ::MQTTClient_deliveryToken. This is populated with a token representing the message when the function returns successfully. If your application does not use delivery tokens, set this argument to NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the message is accepted for publication. An error code is returned if there was a problem accepting the message. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_aff2dede68d660c4b6e27821669f952a0_cgraph.png" border="0" usemap="#MQTTClient_8c_aff2dede68d660c4b6e27821669f952a0_cgraph" alt=""/></div>
<map name="MQTTClient_8c_aff2dede68d660c4b6e27821669f952a0_cgraph" id="MQTTClient_8c_aff2dede68d660c4b6e27821669f952a0_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="2087,93,2233,120"/><area shape="rect" id="node3" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="220,1107,369,1133"/><area shape="rect" id="node6" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1422,803,1601,829"/><area shape="rect" id="node10" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="1933,499,1978,525"/><area shape="rect" id="node12" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="2079,448,2241,475"/><area shape="rect" id="node13" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1223,245,1351,272"/><area shape="rect" id="node15" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1427,129,1595,170"/><area shape="rect" id="node21" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="197,853,392,880"/><area shape="rect" id="node23" href="MQTTProtocolClient_8c.html#a0f86c2cc2debfa39e275d3c76d5d0073" title="Start a new publish exchange. " alt="" coords="199,705,390,732"/><area shape="rect" id="node41" href="SocketBuffer_8c.html#a5f22a1ac450cb1805e2ab8f2ae3da80e" title="Get any queued write data for a specific socket. " alt="" coords="213,955,376,981"/><area shape="rect" id="node4" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="480,1107,591,1133"/><area shape="rect" id="node5" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="713,1107,859,1133"/><area shape="rect" id="node7" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1695,904,1793,931"/><area shape="rect" id="node9" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1697,803,1791,829"/><area shape="rect" id="node8" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1892,904,2019,931"/><area shape="rect" id="node11" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="2103,499,2217,525"/><area shape="rect" id="node14" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1438,245,1585,272"/><area shape="rect" id="node16" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1656,195,1832,221"/><area shape="rect" id="node17" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="1883,144,2028,171"/><area shape="rect" id="node18" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="1889,195,2022,221"/><area shape="rect" id="node19" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="1904,245,2007,272"/><area shape="rect" id="node20" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="1882,296,2029,323"/><area shape="rect" id="node22" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="459,853,612,880"/><area shape="rect" id="node24" href="MQTTProtocolClient_8c.html#a1c8585308f7ec4347ac7dd73745034ee" title="Copy and store message data for retries. " alt="" coords="679,495,893,521"/><area shape="rect" id="node27" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1697,701,1791,728"/><area shape="rect" id="node29" href="MQTTProtocolClient_8c.html#ab1d154a55648ad2a69a280a8245637a9" title="Utility function to start a new publish exchange. " alt="" coords="440,653,631,694"/><area shape="rect" id="node25" href="MQTTProtocolClient_8c.html#ac753a3ad12292a0a9c2f4343bd33817e" title="Store message data for possible retry. " alt="" coords="941,448,1160,475"/><area shape="rect" id="node26" href="Heap_8c.html#a0f10ff94faca02a6f81953c889802954" title="Utility to find an item in the heap. " alt="" coords="1898,347,2013,373"/><area shape="rect" id="node28" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1880,701,2031,728"/><area shape="rect" id="node30" href="MQTTPacket_8c.html#a9ebcf93ff2ba3bd103f016c975e9c9c4" title="Send an MQTT PUBLISH packet down a socket. " alt="" coords="691,649,881,676"/><area shape="rect" id="node31" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1017,628,1085,655"/><area shape="rect" id="node32" href="MQTTPacket_8c.html#acb26c661ace84258675839c3d71a4820" title="Sends an MQTT packet from multiple buffers in one system call write. " alt="" coords="979,679,1123,705"/><area shape="rect" id="node33" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="1211,701,1364,728"/><area shape="rect" id="node34" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1254,651,1321,677"/><area shape="rect" id="node35" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1208,853,1367,880"/><area shape="rect" id="node37" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="1222,600,1353,627"/><area shape="rect" id="node36" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1432,853,1591,880"/><area shape="rect" id="node38" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1456,549,1567,576"/><area shape="rect" id="node40" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1415,651,1608,677"/><area shape="rect" id="node39" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1692,549,1796,576"/><area shape="rect" id="node42" href="SocketBuffer_8c.html#a39f1ee9c98bc12a7be4d7a40b03550d5" title="List callback function for comparing pending_writes by socket. " alt="" coords="446,955,625,981"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5e0cfa14237d7557bee2a59747ecadd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_publishMessage </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_deliveryToken *&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to publish a message to a given topic (see also <a class="el" href="MQTTClient_8c.html#aff2dede68d660c4b6e27821669f952a0" title="This function attempts to publish a message to a given topic (see also MQTTClient_publishMessage()). ">MQTTClient_publish()</a>). </p>
<p>An ::MQTTClient_deliveryToken is issued when this function returns successfully. If the client application needs to test for succesful delivery of QoS1 and QoS2 messages, this can be done either asynchronously or synchronously (see async, <a class="el" href="MQTTClient_8c.html#ab8786efdd6c3a50c6ca33cfb5d8fc283" title="This function is called by the client application to synchronize execution of the main thread with co...">MQTTClient_waitForCompletion</a> and MQTTClient_deliveryComplete()). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">topicName</td><td>The topic associated with this message. </td></tr>
    <tr><td class="paramname">msg</td><td>A pointer to a valid <a class="el" href="structMQTTClient__message.html" title="A structure representing the payload and attributes of an MQTT message. ">MQTTClient_message</a> structure containing the payload and attributes of the message to be published. </td></tr>
    <tr><td class="paramname">dt</td><td>A pointer to an ::MQTTClient_deliveryToken. This is populated with a token representing the message when the function returns successfully. If your application does not use delivery tokens, set this argument to NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the message is accepted for publication. An error code is returned if there was a problem accepting the message. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a5e0cfa14237d7557bee2a59747ecadd3_cgraph.png" border="0" usemap="#MQTTClient_8c_a5e0cfa14237d7557bee2a59747ecadd3_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a5e0cfa14237d7557bee2a59747ecadd3_cgraph" id="MQTTClient_8c_a5e0cfa14237d7557bee2a59747ecadd3_cgraph">
<area shape="rect" id="node2" href="MQTTClient_8c.html#aff2dede68d660c4b6e27821669f952a0" title="This function attempts to publish a message to a given topic (see also MQTTClient_publishMessage()). " alt="" coords="255,755,399,781"/><area shape="rect" id="node3" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="2336,93,2483,120"/><area shape="rect" id="node4" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="469,1107,619,1133"/><area shape="rect" id="node7" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1671,803,1850,829"/><area shape="rect" id="node11" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="2182,499,2227,525"/><area shape="rect" id="node13" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="2328,448,2491,475"/><area shape="rect" id="node14" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1473,245,1601,272"/><area shape="rect" id="node16" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1677,129,1845,170"/><area shape="rect" id="node22" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="447,853,641,880"/><area shape="rect" id="node24" href="MQTTProtocolClient_8c.html#a0f86c2cc2debfa39e275d3c76d5d0073" title="Start a new publish exchange. " alt="" coords="449,705,639,732"/><area shape="rect" id="node42" href="SocketBuffer_8c.html#a5f22a1ac450cb1805e2ab8f2ae3da80e" title="Get any queued write data for a specific socket. " alt="" coords="463,955,625,981"/><area shape="rect" id="node5" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="729,1107,840,1133"/><area shape="rect" id="node6" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="962,1107,1109,1133"/><area shape="rect" id="node8" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1944,904,2043,931"/><area shape="rect" id="node10" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1946,803,2041,829"/><area shape="rect" id="node9" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="2141,904,2268,931"/><area shape="rect" id="node12" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="2352,499,2467,525"/><area shape="rect" id="node15" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1687,245,1834,272"/><area shape="rect" id="node17" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1905,195,2081,221"/><area shape="rect" id="node18" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="2132,144,2277,171"/><area shape="rect" id="node19" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="2138,195,2271,221"/><area shape="rect" id="node20" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="2153,245,2256,272"/><area shape="rect" id="node21" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="2131,296,2278,323"/><area shape="rect" id="node23" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="708,853,861,880"/><area shape="rect" id="node25" href="MQTTProtocolClient_8c.html#a1c8585308f7ec4347ac7dd73745034ee" title="Copy and store message data for retries. " alt="" coords="928,495,1143,521"/><area shape="rect" id="node28" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1947,701,2040,728"/><area shape="rect" id="node30" href="MQTTProtocolClient_8c.html#ab1d154a55648ad2a69a280a8245637a9" title="Utility function to start a new publish exchange. " alt="" coords="689,653,880,694"/><area shape="rect" id="node26" href="MQTTProtocolClient_8c.html#ac753a3ad12292a0a9c2f4343bd33817e" title="Store message data for possible retry. " alt="" coords="1191,448,1409,475"/><area shape="rect" id="node27" href="Heap_8c.html#a0f10ff94faca02a6f81953c889802954" title="Utility to find an item in the heap. " alt="" coords="2147,347,2262,373"/><area shape="rect" id="node29" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="2129,701,2280,728"/><area shape="rect" id="node31" href="MQTTPacket_8c.html#a9ebcf93ff2ba3bd103f016c975e9c9c4" title="Send an MQTT PUBLISH packet down a socket. " alt="" coords="941,649,1130,676"/><area shape="rect" id="node32" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1266,628,1334,655"/><area shape="rect" id="node33" href="MQTTPacket_8c.html#acb26c661ace84258675839c3d71a4820" title="Sends an MQTT packet from multiple buffers in one system call write. " alt="" coords="1228,679,1372,705"/><area shape="rect" id="node34" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="1460,701,1613,728"/><area shape="rect" id="node35" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1503,651,1570,677"/><area shape="rect" id="node36" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1457,853,1616,880"/><area shape="rect" id="node38" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="1471,600,1602,627"/><area shape="rect" id="node37" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1681,853,1840,880"/><area shape="rect" id="node39" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1705,549,1816,576"/><area shape="rect" id="node41" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1664,651,1857,677"/><area shape="rect" id="node40" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1941,549,2045,576"/><area shape="rect" id="node43" href="SocketBuffer_8c.html#a39f1ee9c98bc12a7be4d7a40b03550d5" title="List callback function for comparing pending_writes by socket. " alt="" coords="695,955,874,981"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4c2df88d00a3dadd510a8cb774739366"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_receive </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>topicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>topicLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMQTTClient__message.html">MQTTClient_message</a> **&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function performs a synchronous receive of incoming messages. </p>
<p>It should be used only when the client application has not set callback methods to support asynchronous receipt of messages (see async and <a class="el" href="MQTTClient_8c.html#aad27d07782991a4937ebf2f39a021f83" title="This function sets the callback functions for a specific client. ">MQTTClient_setCallbacks()</a>). Using this function allows a single-threaded client subscriber application to be written. When called, this function blocks until the next message arrives or the specified timeout expires (see also <a class="el" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single-threaded client, call this function periodically to allow processing of me...">MQTTClient_yield()</a>).</p>
<p><b>Important note:</b> The application must free() the memory allocated to the topic and the message when processing is complete (see <a class="el" href="MQTTClient_8c.html#a2bc00ce11e0cac5dbc0938c512b4ab31" title="This function frees memory allocated to an MQTT message, including the additional memory allocated to...">MQTTClient_freeMessage()</a>). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">topicName</td><td>The address of a pointer to a topic. This function allocates the memory for the topic and returns it to the application by setting <em>topicName</em> to point to the topic. </td></tr>
    <tr><td class="paramname">topicLen</td><td>The length of the topic. If the return code from this function is ::MQTTCLIENT_TOPICNAME_TRUNCATED, the topic contains embedded NULL characters and the full topic should be retrieved by using <em>topicLen</em>. </td></tr>
    <tr><td class="paramname">message</td><td>The address of a pointer to the received message. This function allocates the memory for the message and returns it to the application by setting <em>message</em> to point to the received message. The pointer is set to NULL if the timeout expires. </td></tr>
    <tr><td class="paramname">timeout</td><td>The length of time to wait for a message in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS or ::MQTTCLIENT_TOPICNAME_TRUNCATED if a message is received. ::MQTTCLIENT_SUCCESS can also indicate that the timeout expired, in which case <em>message</em> is NULL. An error code is returned if there was a problem trying to receive a message. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a4c2df88d00a3dadd510a8cb774739366_cgraph.png" border="0" usemap="#MQTTClient_8c_a4c2df88d00a3dadd510a8cb774739366_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a4c2df88d00a3dadd510a8cb774739366_cgraph" id="MQTTClient_8c_a4c2df88d00a3dadd510a8cb774739366_cgraph">
<area shape="rect" id="node2" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="865,5,964,32"/><area shape="rect" id="node4" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="841,81,988,108"/><area shape="rect" id="node5" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="199,94,367,135"/><area shape="rect" id="node3" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1044,5,1171,32"/><area shape="rect" id="node6" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="415,245,591,272"/><area shape="rect" id="node7" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="833,296,996,323"/><area shape="rect" id="node8" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="648,93,776,120"/><area shape="rect" id="node9" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="841,245,988,272"/><area shape="rect" id="node10" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="639,347,785,373"/><area shape="rect" id="node11" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="645,397,779,424"/><area shape="rect" id="node12" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="689,448,735,475"/><area shape="rect" id="node14" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="661,144,763,171"/><area shape="rect" id="node15" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="639,195,785,221"/><area shape="rect" id="node13" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="857,448,972,475"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad27d07782991a4937ebf2f39a021f83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_setCallbacks </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_connectionLost *&#160;</td>
          <td class="paramname"><em>cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_messageArrived *&#160;</td>
          <td class="paramname"><em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_deliveryComplete *&#160;</td>
          <td class="paramname"><em>dc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the callback functions for a specific client. </p>
<p>If your client application doesn't use a particular callback, set the relevant parameter to NULL. Calling <a class="el" href="MQTTClient_8c.html#aad27d07782991a4937ebf2f39a021f83" title="This function sets the callback functions for a specific client. ">MQTTClient_setCallbacks()</a> puts the client into multi-threaded mode. Any necessary message acknowledgements and status communications are handled in the background without any intervention from the client application. See async for more information.</p>
<p><b>Note:</b> The MQTT client must be disconnected when this function is called. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">context</td><td>A pointer to any application-specific context. The the <em>context</em> pointer is passed to each of the callback functions to provide access to the context information in the callback. </td></tr>
    <tr><td class="paramname">cl</td><td>A pointer to an MQTTClient_connectionLost() callback function. You can set this to NULL if your application doesn't handle disconnections. </td></tr>
    <tr><td class="paramname">ma</td><td>A pointer to an MQTTClient_messageArrived() callback function. This callback function must be specified when you call <a class="el" href="MQTTClient_8c.html#aad27d07782991a4937ebf2f39a021f83" title="This function sets the callback functions for a specific client. ">MQTTClient_setCallbacks()</a>. </td></tr>
    <tr><td class="paramname">dc</td><td>A pointer to an MQTTClient_deliveryComplete() callback function. You can set this to NULL if your application publishes synchronously or if you do not want to check for successful delivery. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the callbacks were correctly set, ::MQTTCLIENT_FAILURE if an error occurred. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_aad27d07782991a4937ebf2f39a021f83_cgraph.png" border="0" usemap="#MQTTClient_8c_aad27d07782991a4937ebf2f39a021f83_cgraph" alt=""/></div>
<map name="MQTTClient_8c_aad27d07782991a4937ebf2f39a021f83_cgraph" id="MQTTClient_8c_aad27d07782991a4937ebf2f39a021f83_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="240,5,387,32"/><area shape="rect" id="node3" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="232,56,395,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c1c28258f0d5c6a44ff53a98618f5f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_subscribe </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>qos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to subscribe a client to a single topic, which may contain wildcards (see wildcard). </p>
<p>This call also specifies the qos requested for the subscription (see also <a class="el" href="MQTTClient_8c.html#a92fa1c13f3db8399e042fbdbdfb692b3" title="This function attempts to subscribe a client to a list of topics, which may contain wildcards (see wi...">MQTTClient_subscribeMany()</a>). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">topic</td><td>The subscription topic, which may include wildcards. </td></tr>
    <tr><td class="paramname">qos</td><td>The requested quality of service for the subscription. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the subscription request is successful. An error code is returned if there was a problem registering the subscription. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a9c1c28258f0d5c6a44ff53a98618f5f3_cgraph.png" border="0" usemap="#MQTTClient_8c_a9c1c28258f0d5c6a44ff53a98618f5f3_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a9c1c28258f0d5c6a44ff53a98618f5f3_cgraph" id="MQTTClient_8c_a9c1c28258f0d5c6a44ff53a98618f5f3_cgraph">
<area shape="rect" id="node2" href="MQTTClient_8c.html#a92fa1c13f3db8399e042fbdbdfb692b3" title="This function attempts to subscribe a client to a list of topics, which may contain wildcards (see wi..." alt="" coords="213,405,408,432"/><area shape="rect" id="node3" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="2087,816,2233,843"/><area shape="rect" id="node4" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="479,5,628,32"/><area shape="rect" id="node7" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="456,405,651,432"/><area shape="rect" id="node9" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1892,208,2019,235"/><area shape="rect" id="node11" href="LinkedList_8c.html#a27e2cccab9752618ead91eafbe2a9a46" title="Allocates and initializes a new list structure. " alt="" coords="506,468,601,495"/><area shape="rect" id="node13" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1696,512,1789,539"/><area shape="rect" id="node15" href="MQTTProtocolOut_8c.html#adaed5991a304b64fba7fa95bc84efb49" title="MQTT outgoing subscribe processing for a client. " alt="" coords="465,329,642,356"/><area shape="rect" id="node30" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="2079,1019,2241,1045"/><area shape="rect" id="node34" href="LinkedList_8c.html#a8b3e61bc873a90ad2ea43a15e6c001f4" title="Removes and but does not free all items in a list, and frees the list itself. " alt="" coords="483,715,623,741"/><area shape="rect" id="node35" href="MQTTProtocolOut_8c.html#a662c001eb1105428b5cf8474ae4c0456" title="Process an incoming suback packet for a socket. " alt="" coords="1392,259,1605,285"/><area shape="rect" id="node39" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="952,809,1120,850"/><area shape="rect" id="node5" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="746,5,857,32"/><area shape="rect" id="node6" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="963,5,1109,32"/><area shape="rect" id="node8" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1693,360,1792,387"/><area shape="rect" id="node10" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="725,373,878,400"/><area shape="rect" id="node12" href="LinkedList_8c.html#aa254fb1eab8e30d0e03859b333dc22ed" title="Sets a list structure to empty &#45; all null values. " alt="" coords="764,475,839,501"/><area shape="rect" id="node14" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1880,512,2031,539"/><area shape="rect" id="node16" href="MQTTPacketOut_8c.html#addc835836eb89fa39815b0f96d659c59" title="Send an MQTT subscribe packet down a socket. " alt="" coords="699,323,904,349"/><area shape="rect" id="node17" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1222,272,1290,299"/><area shape="rect" id="node18" href="MQTTPacket_8c.html#af0fcaa11ac05ce448a433a53f9cae420" title="Writes a &quot;UTF&quot; string to an output buffer. " alt="" coords="998,323,1074,349"/><area shape="rect" id="node19" href="MQTTPacket_8c.html#ad29ec8b2fbf0ec0195621b44f8945923" title="Writes one character to an output buffer. " alt="" coords="995,373,1077,400"/><area shape="rect" id="node20" href="MQTTPacket_8c.html#a561ff1cb747d27795d1f4fd985e78588" title="Sends an MQTT packet in one system call write. " alt="" coords="967,475,1105,501"/><area shape="rect" id="node28" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="1933,715,1978,741"/><area shape="rect" id="node21" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="1179,461,1333,488"/><area shape="rect" id="node22" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1223,512,1289,539"/><area shape="rect" id="node23" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1419,309,1578,336"/><area shape="rect" id="node25" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="1191,563,1321,589"/><area shape="rect" id="node24" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1663,309,1822,336"/><area shape="rect" id="node26" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1409,411,1588,437"/><area shape="rect" id="node31" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1443,664,1554,691"/><area shape="rect" id="node33" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1402,461,1595,488"/><area shape="rect" id="node27" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1695,411,1790,437"/><area shape="rect" id="node29" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="2103,715,2217,741"/><area shape="rect" id="node32" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1691,664,1795,691"/><area shape="rect" id="node36" href="MQTTPacket_8c.html#a4262b8f35885dc123f59268fb74cec3d" title="Free allocated storage for a suback packet. " alt="" coords="1653,107,1832,133"/><area shape="rect" id="node37" href="LinkedList_8c.html#a276950531b3f54e0dda27d597572c192" title="Removes and frees all items in a list, and frees the list itself. " alt="" coords="1920,5,1991,32"/><area shape="rect" id="node38" href="LinkedList_8c.html#a3cf8578dba23f97dd0411e85fe3b7ff2" title="Removes and frees all items in a list, leaving the list ready for new items. " alt="" coords="2117,5,2203,32"/><area shape="rect" id="node40" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1168,917,1344,944"/><area shape="rect" id="node41" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1435,816,1563,843"/><area shape="rect" id="node43" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="1426,1019,1571,1045"/><area shape="rect" id="node44" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="1432,1069,1565,1096"/><area shape="rect" id="node45" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="1447,917,1550,944"/><area shape="rect" id="node46" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="1425,968,1572,995"/><area shape="rect" id="node42" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1669,816,1816,843"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a92fa1c13f3db8399e042fbdbdfb692b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_subscribeMany </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>qos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to subscribe a client to a list of topics, which may contain wildcards (see wildcard). </p>
<p>This call also specifies the qos requested for each topic (see also <a class="el" href="MQTTClient_8c.html#a9c1c28258f0d5c6a44ff53a98618f5f3" title="This function attempts to subscribe a client to a single topic, which may contain wildcards (see wild...">MQTTClient_subscribe()</a>). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">count</td><td>The number of topics for which the client is requesting subscriptions. </td></tr>
    <tr><td class="paramname">topic</td><td>An array (of length <em>count</em>) of pointers to topics, each of which may include wildcards. </td></tr>
    <tr><td class="paramname">qos</td><td>An array (of length <em>count</em>) of qos values. qos[n] is the requested QoS for topic[n]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the subscription request is successful. An error code is returned if there was a problem registering the subscriptions. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a92fa1c13f3db8399e042fbdbdfb692b3_cgraph.png" border="0" usemap="#MQTTClient_8c_a92fa1c13f3db8399e042fbdbdfb692b3_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a92fa1c13f3db8399e042fbdbdfb692b3_cgraph" id="MQTTClient_8c_a92fa1c13f3db8399e042fbdbdfb692b3_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="1879,816,2025,843"/><area shape="rect" id="node3" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="271,5,420,32"/><area shape="rect" id="node6" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="248,405,443,432"/><area shape="rect" id="node8" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1684,208,1811,235"/><area shape="rect" id="node10" href="LinkedList_8c.html#a27e2cccab9752618ead91eafbe2a9a46" title="Allocates and initializes a new list structure. " alt="" coords="298,468,393,495"/><area shape="rect" id="node12" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1488,512,1581,539"/><area shape="rect" id="node14" href="MQTTProtocolOut_8c.html#adaed5991a304b64fba7fa95bc84efb49" title="MQTT outgoing subscribe processing for a client. " alt="" coords="257,329,434,356"/><area shape="rect" id="node29" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="1871,1019,2033,1045"/><area shape="rect" id="node33" href="LinkedList_8c.html#a8b3e61bc873a90ad2ea43a15e6c001f4" title="Removes and but does not free all items in a list, and frees the list itself. " alt="" coords="275,715,415,741"/><area shape="rect" id="node34" href="MQTTProtocolOut_8c.html#a662c001eb1105428b5cf8474ae4c0456" title="Process an incoming suback packet for a socket. " alt="" coords="1184,259,1397,285"/><area shape="rect" id="node38" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="744,809,912,850"/><area shape="rect" id="node4" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="538,5,649,32"/><area shape="rect" id="node5" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="755,5,901,32"/><area shape="rect" id="node7" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1485,360,1584,387"/><area shape="rect" id="node9" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="517,373,670,400"/><area shape="rect" id="node11" href="LinkedList_8c.html#aa254fb1eab8e30d0e03859b333dc22ed" title="Sets a list structure to empty &#45; all null values. " alt="" coords="556,475,631,501"/><area shape="rect" id="node13" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1672,512,1823,539"/><area shape="rect" id="node15" href="MQTTPacketOut_8c.html#addc835836eb89fa39815b0f96d659c59" title="Send an MQTT subscribe packet down a socket. " alt="" coords="491,323,696,349"/><area shape="rect" id="node16" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1014,272,1082,299"/><area shape="rect" id="node17" href="MQTTPacket_8c.html#af0fcaa11ac05ce448a433a53f9cae420" title="Writes a &quot;UTF&quot; string to an output buffer. " alt="" coords="790,323,866,349"/><area shape="rect" id="node18" href="MQTTPacket_8c.html#ad29ec8b2fbf0ec0195621b44f8945923" title="Writes one character to an output buffer. " alt="" coords="787,373,869,400"/><area shape="rect" id="node19" href="MQTTPacket_8c.html#a561ff1cb747d27795d1f4fd985e78588" title="Sends an MQTT packet in one system call write. " alt="" coords="759,475,897,501"/><area shape="rect" id="node27" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="1725,715,1770,741"/><area shape="rect" id="node20" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="971,461,1125,488"/><area shape="rect" id="node21" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1015,512,1081,539"/><area shape="rect" id="node22" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1211,309,1370,336"/><area shape="rect" id="node24" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="983,563,1113,589"/><area shape="rect" id="node23" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1455,309,1614,336"/><area shape="rect" id="node25" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1201,411,1380,437"/><area shape="rect" id="node30" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1235,664,1346,691"/><area shape="rect" id="node32" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1194,461,1387,488"/><area shape="rect" id="node26" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1487,411,1582,437"/><area shape="rect" id="node28" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="1895,715,2009,741"/><area shape="rect" id="node31" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1483,664,1587,691"/><area shape="rect" id="node35" href="MQTTPacket_8c.html#a4262b8f35885dc123f59268fb74cec3d" title="Free allocated storage for a suback packet. " alt="" coords="1445,107,1624,133"/><area shape="rect" id="node36" href="LinkedList_8c.html#a276950531b3f54e0dda27d597572c192" title="Removes and frees all items in a list, and frees the list itself. " alt="" coords="1712,5,1783,32"/><area shape="rect" id="node37" href="LinkedList_8c.html#a3cf8578dba23f97dd0411e85fe3b7ff2" title="Removes and frees all items in a list, leaving the list ready for new items. " alt="" coords="1909,5,1995,32"/><area shape="rect" id="node39" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="960,917,1136,944"/><area shape="rect" id="node40" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1227,816,1355,843"/><area shape="rect" id="node42" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="1218,1019,1363,1045"/><area shape="rect" id="node43" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="1224,1069,1357,1096"/><area shape="rect" id="node44" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="1239,917,1342,944"/><area shape="rect" id="node45" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="1217,968,1364,995"/><area shape="rect" id="node41" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1461,816,1608,843"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa8731be3dbc6a25f41f037f8bbbb054b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to remove an existing subscription made by the specified client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">topic</td><td>The topic for the subscription to be removed, which may include wildcards (see wildcard). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the subscription is removed. An error code is returned if there was a problem removing the subscription. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_aa8731be3dbc6a25f41f037f8bbbb054b_cgraph.png" border="0" usemap="#MQTTClient_8c_aa8731be3dbc6a25f41f037f8bbbb054b_cgraph" alt=""/></div>
<map name="MQTTClient_8c_aa8731be3dbc6a25f41f037f8bbbb054b_cgraph" id="MQTTClient_8c_aa8731be3dbc6a25f41f037f8bbbb054b_cgraph">
<area shape="rect" id="node2" href="MQTTClient_8c.html#a50abbce720d50b9f84b97ff9fa1f546d" title="This function attempts to remove existing subscriptions to a list of topics made by the specified cli..." alt="" coords="229,755,440,781"/><area shape="rect" id="node3" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="2131,260,2277,287"/><area shape="rect" id="node4" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="511,1083,660,1109"/><area shape="rect" id="node7" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="488,792,683,819"/><area shape="rect" id="node11" href="LinkedList_8c.html#a27e2cccab9752618ead91eafbe2a9a46" title="Allocates and initializes a new list structure. " alt="" coords="538,1133,633,1160"/><area shape="rect" id="node13" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1750,1007,1843,1033"/><area shape="rect" id="node15" href="MQTTProtocolOut_8c.html#a0e40d8681b9cbc442dceafa8b8a8f79c" title="MQTT outgoing unsubscribe processing for a client. " alt="" coords="489,716,682,743"/><area shape="rect" id="node29" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="2123,387,2285,413"/><area shape="rect" id="node33" href="LinkedList_8c.html#a8b3e61bc873a90ad2ea43a15e6c001f4" title="Removes and but does not free all items in a list, and frees the list itself. " alt="" coords="515,1184,655,1211"/><area shape="rect" id="node34" href="MQTTProtocolOut_8c.html#acefb6038412bccf253bdc3f18fbfaf47" title="Process an incoming unsuback packet for a socket. " alt="" coords="1440,601,1669,628"/><area shape="rect" id="node35" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1000,442,1168,483"/><area shape="rect" id="node5" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="786,1083,897,1109"/><area shape="rect" id="node6" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="1011,1083,1157,1109"/><area shape="rect" id="node8" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1747,703,1846,729"/><area shape="rect" id="node10" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="765,792,918,819"/><area shape="rect" id="node9" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1936,829,2063,856"/><area shape="rect" id="node12" href="LinkedList_8c.html#aa254fb1eab8e30d0e03859b333dc22ed" title="Sets a list structure to empty &#45; all null values. " alt="" coords="804,1133,879,1160"/><area shape="rect" id="node14" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1924,1007,2075,1033"/><area shape="rect" id="node16" href="MQTTPacketOut_8c.html#a3735ac8da0da3b849a694912af9fdbfe" title="Send an MQTT unsubscribe packet down a socket. " alt="" coords="731,709,952,736"/><area shape="rect" id="node17" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1270,652,1338,679"/><area shape="rect" id="node18" href="MQTTPacket_8c.html#af0fcaa11ac05ce448a433a53f9cae420" title="Writes a &quot;UTF&quot; string to an output buffer. " alt="" coords="1046,652,1122,679"/><area shape="rect" id="node19" href="MQTTPacket_8c.html#a561ff1cb747d27795d1f4fd985e78588" title="Sends an MQTT packet in one system call write. " alt="" coords="1015,753,1153,780"/><area shape="rect" id="node27" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="1977,551,2022,577"/><area shape="rect" id="node20" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="1227,804,1381,831"/><area shape="rect" id="node21" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1271,703,1337,729"/><area shape="rect" id="node22" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1475,652,1634,679"/><area shape="rect" id="node24" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="1239,905,1369,932"/><area shape="rect" id="node23" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1717,652,1876,679"/><area shape="rect" id="node25" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1465,753,1644,780"/><area shape="rect" id="node30" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1499,804,1610,831"/><area shape="rect" id="node32" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1458,1007,1651,1033"/><area shape="rect" id="node26" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1749,753,1844,780"/><area shape="rect" id="node28" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="2147,551,2261,577"/><area shape="rect" id="node31" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1745,804,1849,831"/><area shape="rect" id="node36" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="1216,297,1392,324"/><area shape="rect" id="node37" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1491,449,1619,476"/><area shape="rect" id="node39" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="1482,196,1627,223"/><area shape="rect" id="node40" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="1488,247,1621,273"/><area shape="rect" id="node41" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="1503,297,1606,324"/><area shape="rect" id="node42" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="1481,145,1628,172"/><area shape="rect" id="node38" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1723,449,1870,476"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a50abbce720d50b9f84b97ff9fa1f546d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_unsubscribeMany </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function attempts to remove existing subscriptions to a list of topics made by the specified client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">count</td><td>The number subscriptions to be removed. </td></tr>
    <tr><td class="paramname">topic</td><td>An array (of length <em>count</em>) of pointers to the topics of the subscriptions to be removed, each of which may include wildcards. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the subscriptions are removed. An error code is returned if there was a problem removing the subscriptions. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a50abbce720d50b9f84b97ff9fa1f546d_cgraph.png" border="0" usemap="#MQTTClient_8c_a50abbce720d50b9f84b97ff9fa1f546d_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a50abbce720d50b9f84b97ff9fa1f546d_cgraph" id="MQTTClient_8c_a50abbce720d50b9f84b97ff9fa1f546d_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="1907,260,2053,287"/><area shape="rect" id="node3" href="utf-8_8c.html#a4f3cf77538d867bb5b421bcb687dccdf" title="Validate a null&#45;terminated string has only UTF&#45;8 characters. " alt="" coords="287,1083,436,1109"/><area shape="rect" id="node6" href="MQTTProtocolClient_8c.html#a0fa824f9702cb6b0d7c800fd65198fce" title="Assign a new message id for a client. " alt="" coords="264,792,459,819"/><area shape="rect" id="node10" href="LinkedList_8c.html#a27e2cccab9752618ead91eafbe2a9a46" title="Allocates and initializes a new list structure. " alt="" coords="314,1133,409,1160"/><area shape="rect" id="node12" href="LinkedList_8c.html#ad02ee8fbea38b825280772de89529d20" title="Append an item to a list. " alt="" coords="1526,1007,1619,1033"/><area shape="rect" id="node14" href="MQTTProtocolOut_8c.html#a0e40d8681b9cbc442dceafa8b8a8f79c" title="MQTT outgoing unsubscribe processing for a client. " alt="" coords="265,716,458,743"/><area shape="rect" id="node28" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="1899,387,2061,413"/><area shape="rect" id="node32" href="LinkedList_8c.html#a8b3e61bc873a90ad2ea43a15e6c001f4" title="Removes and but does not free all items in a list, and frees the list itself. " alt="" coords="291,1184,431,1211"/><area shape="rect" id="node33" href="MQTTProtocolOut_8c.html#acefb6038412bccf253bdc3f18fbfaf47" title="Process an incoming unsuback packet for a socket. " alt="" coords="1216,601,1445,628"/><area shape="rect" id="node34" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="776,442,944,483"/><area shape="rect" id="node4" href="utf-8_8c.html#ad2012627fca4b4bdd9f67bde49b0d1cb" title="Validate a length&#45;delimited string has only UTF&#45;8 characters. " alt="" coords="562,1083,673,1109"/><area shape="rect" id="node5" href="utf-8_8c.html#adfdad3322f31972a083dbb46caab2845" title="Validate a single UTF&#45;8 character. " alt="" coords="787,1083,933,1109"/><area shape="rect" id="node7" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="1523,703,1622,729"/><area shape="rect" id="node9" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="541,792,694,819"/><area shape="rect" id="node8" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="1712,829,1839,856"/><area shape="rect" id="node11" href="LinkedList_8c.html#aa254fb1eab8e30d0e03859b333dc22ed" title="Sets a list structure to empty &#45; all null values. " alt="" coords="580,1133,655,1160"/><area shape="rect" id="node13" href="LinkedList_8c.html#a321a3598d6979c7af3f995b77ea2cec3" title="Append an already allocated ListElement and content to a list. " alt="" coords="1700,1007,1851,1033"/><area shape="rect" id="node15" href="MQTTPacketOut_8c.html#a3735ac8da0da3b849a694912af9fdbfe" title="Send an MQTT unsubscribe packet down a socket. " alt="" coords="507,709,728,736"/><area shape="rect" id="node16" href="MQTTPacket_8c.html#a07aa0146eda3d32979142e7df8ad5fc3" title="Writes an integer as 2 bytes to an output buffer. " alt="" coords="1046,652,1114,679"/><area shape="rect" id="node17" href="MQTTPacket_8c.html#af0fcaa11ac05ce448a433a53f9cae420" title="Writes a &quot;UTF&quot; string to an output buffer. " alt="" coords="822,652,898,679"/><area shape="rect" id="node18" href="MQTTPacket_8c.html#a561ff1cb747d27795d1f4fd985e78588" title="Sends an MQTT packet in one system call write. " alt="" coords="791,753,929,780"/><area shape="rect" id="node26" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="1753,551,1798,577"/><area shape="rect" id="node19" href="MQTTPacket_8c.html#aadd77a4fa1b2d5c7791e3542c56af856" title="Encodes the message length according to the MQTT algorithm. " alt="" coords="1003,804,1157,831"/><area shape="rect" id="node20" href="MQTTPacket_8c.html#a132d2d5b304d37cd2348a973f7b315de" title="Calculates an integer from two bytes read from the input buffer. " alt="" coords="1047,703,1113,729"/><area shape="rect" id="node21" href="MQTTPersistence_8c.html#a41168618b27d3c1ca74d6a7c4ab26214" title="Adds a record to the persistent store. " alt="" coords="1251,652,1410,679"/><area shape="rect" id="node23" href="Socket_8c.html#a05dbad60845044788d3b239df98281e3" title="Attempts to write a series of buffers to a socket in one system call so that they are sent as one pac..." alt="" coords="1015,905,1145,932"/><area shape="rect" id="node22" href="Clients_8c.html#a82dc4e265fecdaea2810ccdeab0abf52" title="List callback function for comparing clients by socket. " alt="" coords="1493,652,1652,679"/><area shape="rect" id="node24" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="1241,753,1420,780"/><area shape="rect" id="node29" href="Socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3" title="Attempts to write a series of iovec buffers to a socket in one system call so that they are sent as o..." alt="" coords="1275,804,1386,831"/><area shape="rect" id="node31" href="SocketBuffer_8c.html#a5c1cce77d5ba528483bbb108f851db2f" title="A socket write was interrupted so store the remaining data. " alt="" coords="1234,1007,1427,1033"/><area shape="rect" id="node25" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="1525,753,1620,780"/><area shape="rect" id="node27" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="1923,551,2037,577"/><area shape="rect" id="node30" href="Socket_8c.html#a47824ad5afba267b9488150e1f7e8610" title="Gets the specific error corresponding to SOCKET_ERROR. " alt="" coords="1521,804,1625,831"/><area shape="rect" id="node35" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="992,297,1168,324"/><area shape="rect" id="node36" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="1267,449,1395,476"/><area shape="rect" id="node38" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="1258,196,1403,223"/><area shape="rect" id="node39" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="1264,247,1397,273"/><area shape="rect" id="node40" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="1279,297,1382,324"/><area shape="rect" id="node41" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="1257,145,1404,172"/><area shape="rect" id="node37" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="1499,449,1646,476"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab8786efdd6c3a50c6ca33cfb5d8fc283"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MQTTClient_waitForCompletion </td>
          <td>(</td>
          <td class="paramtype">MQTTClient&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTClient_deliveryToken&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called by the client application to synchronize execution of the main thread with completed publication of a message. </p>
<p>When called, <a class="el" href="MQTTClient_8c.html#ab8786efdd6c3a50c6ca33cfb5d8fc283" title="This function is called by the client application to synchronize execution of the main thread with co...">MQTTClient_waitForCompletion()</a> blocks execution until the message has been successful delivered or the specified timeout has expired. See async. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A valid client handle from a successful call to <a class="el" href="MQTTClient_8c.html#a9a0518d9ca924d12c1329dbe3de5f2b6" title="This function creates an MQTT client ready for connection to the specified server and using the speci...">MQTTClient_create()</a>. </td></tr>
    <tr><td class="paramname">dt</td><td>The ::MQTTClient_deliveryToken that represents the message being tested for successful delivery. Delivery tokens are issued by the publishing functions <a class="el" href="MQTTClient_8c.html#aff2dede68d660c4b6e27821669f952a0" title="This function attempts to publish a message to a given topic (see also MQTTClient_publishMessage()). ">MQTTClient_publish()</a> and <a class="el" href="MQTTClient_8c.html#a5e0cfa14237d7557bee2a59747ecadd3" title="This function attempts to publish a message to a given topic (see also MQTTClient_publish()). ">MQTTClient_publishMessage()</a>. </td></tr>
    <tr><td class="paramname">timeout</td><td>The maximum time to wait in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>::MQTTCLIENT_SUCCESS if the message was successfully delivered. An error code is returned if the timeout expires or there was a problem checking the token. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_ab8786efdd6c3a50c6ca33cfb5d8fc283_cgraph.png" border="0" usemap="#MQTTClient_8c_ab8786efdd6c3a50c6ca33cfb5d8fc283_cgraph" alt=""/></div>
<map name="MQTTClient_8c_ab8786efdd6c3a50c6ca33cfb5d8fc283_cgraph" id="MQTTClient_8c_ab8786efdd6c3a50c6ca33cfb5d8fc283_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="1115,413,1261,440"/><area shape="rect" id="node3" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="507,43,605,69"/><area shape="rect" id="node5" href="MQTTProtocolClient_8c.html#a286c2ef2904b5eb4a0ffa5b598961c67" title="List callback function for comparing Message structures by message id. " alt="" coords="271,93,424,120"/><area shape="rect" id="node6" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="1107,109,1269,136"/><area shape="rect" id="node7" href="MQTTClient_8c.html#a8ad3d29864a9ca08202b0832e0f6678e" title="When implementing a single&#45;threaded client, call this function periodically to allow processing of me..." alt="" coords="283,144,411,171"/><area shape="rect" id="node4" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="713,43,839,69"/><area shape="rect" id="node8" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="483,93,629,120"/><area shape="rect" id="node9" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="472,195,640,237"/><area shape="rect" id="node10" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="688,261,864,288"/><area shape="rect" id="node11" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="913,388,1058,415"/><area shape="rect" id="node12" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="919,439,1052,465"/><area shape="rect" id="node13" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="963,236,1008,263"/><area shape="rect" id="node15" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="934,185,1037,212"/><area shape="rect" id="node16" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="912,287,1059,313"/><area shape="rect" id="node14" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="1131,236,1245,263"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ad3d29864a9ca08202b0832e0f6678e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQTTClient_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When implementing a single-threaded client, call this function periodically to allow processing of message retries and to send MQTT keepalive pings. </p>
<p>If the application is calling <a class="el" href="MQTTClient_8c.html#a4c2df88d00a3dadd510a8cb774739366" title="This function performs a synchronous receive of incoming messages. ">MQTTClient_receive()</a> regularly, then it is not necessary to call this function. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a8ad3d29864a9ca08202b0832e0f6678e_cgraph.png" border="0" usemap="#MQTTClient_8c_a8ad3d29864a9ca08202b0832e0f6678e_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a8ad3d29864a9ca08202b0832e0f6678e_cgraph" id="MQTTClient_8c_a8ad3d29864a9ca08202b0832e0f6678e_cgraph">
<area shape="rect" id="node2" href="Thread_8c.html#a7e92185eb22775c76e1b6b8865468f17" title="Lock a mutex which has already been created, block until ready. " alt="" coords="824,49,971,75"/><area shape="rect" id="node3" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="216,70,315,97"/><area shape="rect" id="node5" href="MQTTClient_8c.html#af705886a44c359b7763e1e907ced9bfd" title="List callback function for comparing clients by socket. " alt="" coords="192,121,339,147"/><area shape="rect" id="node6" href="MQTTClient_8c.html#a557f4794895060f1279f9df64a36cef9" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="181,172,349,213"/><area shape="rect" id="node8" href="Thread_8c.html#a5faf758226199e7cf93f6b489aca07f7" title="Unlock a mutex which has already been locked. " alt="" coords="816,353,979,379"/><area shape="rect" id="node4" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="422,70,549,97"/><area shape="rect" id="node7" href="MQTTClient_8c.html#a2ce7b4ac49581bb8b17e3f1a31bc7fc6" title="mqttclient_mutex must be locked when you call this function, if multi threaded " alt="" coords="397,201,573,227"/><area shape="rect" id="node9" href="Thread_8c.html#ad327c467c568b27be4c3676fc698e129" title="Check to see if a semaphore has been posted, without waiting. " alt="" coords="622,251,767,278"/><area shape="rect" id="node10" href="Thread_8c.html#a4d0bbfc059da3cd10626244d3468d319" title="Wait for a semaphore to be posted, or timeout. " alt="" coords="628,302,761,329"/><area shape="rect" id="node11" href="Log_8c.html#a87f2e36f80963ac280f67b9ccdf03d0a" title="Log a message. " alt="" coords="672,201,717,227"/><area shape="rect" id="node13" href="Thread_8c.html#a2e22778d99253b899d19a5c92826b4e1" title="Start a new thread. " alt="" coords="643,99,746,126"/><area shape="rect" id="node14" href="MQTTClient_8c.html#a43961cb53e692999e3f4cf1fe3dfd4e2" title="Wrapper function to call connection lost on a separate thread. " alt="" coords="621,150,768,177"/><area shape="rect" id="node12" href="Messages_8c.html#a29732d9f9c438e569ddc89a5ee61501c" title="Get a log message by its index. " alt="" coords="840,201,955,227"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a634889b3a4a1f4a8ab5bf268ceb63691"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQTTProtocol_checkPendingWrites </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See if any pending writes have been completed, and cleanup if so. </p>
<p>Cleaning up means removing any publication data that was stored because the write did not originally complete. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="MQTTClient_8c_a634889b3a4a1f4a8ab5bf268ceb63691_cgraph.png" border="0" usemap="#MQTTClient_8c_a634889b3a4a1f4a8ab5bf268ceb63691_cgraph" alt=""/></div>
<map name="MQTTClient_8c_a634889b3a4a1f4a8ab5bf268ceb63691_cgraph" id="MQTTClient_8c_a634889b3a4a1f4a8ab5bf268ceb63691_cgraph">
<area shape="rect" id="node2" href="Socket_8c.html#ae95673b434f2c489ecefe4688c80be2d" title="Indicate whether any data is pending outbound for a socket. " alt="" coords="285,107,464,133"/><area shape="rect" id="node4" href="LinkedList_8c.html#a7c6fba7f4b569c69829676bed2852ee9" title="Forward iteration through a list. " alt="" coords="960,132,1087,159"/><area shape="rect" id="node6" href="MQTTProtocolClient_8c.html#a900fa28a8774ad6f5535104bb62e7abf" title="Remove stored message data. " alt="" coords="257,5,492,32"/><area shape="rect" id="node7" href="LinkedList_8c.html#a8430370b2b15c56ec95bb8e7e36753a5" title="Removes and frees an item in a list by comparing the pointer to the content. " alt="" coords="540,5,635,32"/><area shape="rect" id="node3" href="LinkedList_8c.html#acad319e9ce896ff1fff30ddbeb06d22d" title="Finds an element in a list by comparing the content or pointer to the content. " alt="" coords="813,107,912,133"/><area shape="rect" id="node5" href="LinkedList_8c.html#a1738915a6d6f10022e9ee1481c0ae452" title="List callback function for comparing integers. " alt="" coords="540,56,635,83"/><area shape="rect" id="node8" href="LinkedList_8c.html#a7c3ca6a923cf771a5e68b25047d3df42" title="Removes and optionally frees an element in a list by comparing the content. " alt="" coords="683,31,765,57"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a7de1b785bccb15bfa46dcf3a6706aad0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structClientStates.html">ClientStates</a> ClientState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">        CLIENT_VERSION, </div>
<div class="line">        NULL </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 4 2016 12:02:58 for MQTT C Client Libraries Internals by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
